import React, {useEffect,useState, useContext} from 'react'; import { motion } from 'framer-motion'; import { AuthContext } from '../auth/AuthContext';
export default function Dashboard(){ const { authFetch } = useContext(AuthContext); const [stats,setStats]=useState(null);
useEffect(()=>{(async ()=>{ try{ const res = await fetch((import.meta.env.MODE==='development'?'http://localhost:8000':'') + '/api/stats'); if(res.ok){ setStats(await res.json()); } }catch(e){ console.error(e);} })();},[]);
return (<div className='space-y-6'><div className='flex items-center justify-between'><h1 className='text-2xl font-bold'>Welcome to Loler ðŸŒ¿</h1><button className='px-3 py-1 bg-green-600 text-white rounded'>Sync Now</button></div><div className='grid grid-cols-1 md:grid-cols-3 gap-4'> <motion.div className='card' whileHover={{y:-4}}><p className='text-sm text-gray-500'>Active Users</p><p className='text-2xl font-bold'>{stats?stats.activeUsers: 'â€”'}</p></motion.div><motion.div className='card' whileHover={{y:-4}}><p className='text-sm text-gray-500'>Recent Reports</p><p className='text-2xl font-bold'>{stats?stats.recentReports:'â€”'}</p></motion.div><motion.div className='card' whileHover={{y:-4}}><p className='text-sm text-gray-500'>Last GEE Sync</p><p className='text-2xl font-bold'>{stats && stats.lastGEESync ? new Date(stats.lastGEESync).toLocaleString() : 'â€”'}</p></motion.div></div></div>); }
